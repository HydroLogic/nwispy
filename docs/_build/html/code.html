<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Code Documentation &mdash; nwispy 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="nwispy 1.0.0 documentation" href="index.html" />
    <link rel="next" title="Gallery" href="images.html" />
    <link rel="prev" title="Overview" href="overview.html" /> 
  </head>
  <body>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="index.html"><img src="_static/logo.png" border="0" alt="py4sci"/></a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="images.html" title="Gallery"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="Overview"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">home</a>|&nbsp;</li>
        <li><a href="search.html">search</a>|&nbsp;</li>
 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Code Documentation</a><ul>
<li><a class="reference internal" href="#module-nwispy">nwispy</a></li>
<li><a class="reference internal" href="#module-nwispy_filereader">nwispy_filereader</a></li>
<li><a class="reference internal" href="#module-nwispy_webservice">nwispy_webservice</a></li>
<li><a class="reference internal" href="#module-nwispy_viewer">nwispy_viewer</a></li>
<li><a class="reference internal" href="#module-nwispy_logging">nwispy_logging</a></li>
<li><a class="reference internal" href="#nwispy-helpers">nwispy_helpers</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="overview.html"
                        title="previous chapter">Overview</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="images.html"
                        title="next chapter">Gallery</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/code.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="code-documentation">
<h1>Code Documentation<a class="headerlink" href="#code-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-nwispy">
<span id="nwispy"></span><h2>nwispy<a class="headerlink" href="#module-nwispy" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Module:</th><td class="field-body">nwispy.py</td>
</tr>
<tr class="field-even field"><th class="field-name">Author:</th><td class="field-body">Jeremiah Lant</td>
</tr>
<tr class="field-odd field"><th class="field-name">Email:</th><td class="field-body"><a class="reference external" href="mailto:jlant&#37;&#52;&#48;usgs&#46;gov">jlant<span>&#64;</span>usgs<span>&#46;</span>gov</a></td>
</tr>
<tr class="field-even field"><th class="field-name">Purpose:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>Main controller that controls user input options and calls the appropriate modules.</p>
<dl class="function">
<dt id="nwispy.main">
<tt class="descclassname">nwispy.</tt><tt class="descname">main</tt><big>(</big><big>)</big><a class="headerlink" href="#nwispy.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Run program based on user input arguments. Program will automatically process file(s) supplied or downloaded,
log any errors found in the data file, and will save plots of every parameter. Error log and plots are saved to 
a directory (tagged with &#8216;output&#8217;) at the same level as the supplied or downloaded data files.</p>
</dd></dl>

<dl class="function">
<dt id="nwispy.process_files">
<tt class="descclassname">nwispy.</tt><tt class="descname">process_files</tt><big>(</big><em>file_list</em>, <em>arguments</em><big>)</big><a class="headerlink" href="#nwispy.process_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a list of files according to options contained in arguments.</p>
<dl class="docutils">
<dt><em>Parameters:</em></dt>
<dd>file_list : list of files to process
arguments : argparse object; created by parser.parse_args()</dd>
<dt><em>Return:</em></dt>
<dd>No return</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nwispy_filereader">
<span id="nwispy-filereader"></span><h2>nwispy_filereader<a class="headerlink" href="#module-nwispy_filereader" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Module:</th><td class="field-body">nwispy_filereader.py</td>
</tr>
<tr class="field-even field"><th class="field-name">Author:</th><td class="field-body">Jeremiah Lant</td>
</tr>
<tr class="field-odd field"><th class="field-name">Email:</th><td class="field-body"><a class="reference external" href="mailto:jlant&#37;&#52;&#48;usgs&#46;gov">jlant<span>&#64;</span>usgs<span>&#46;</span>gov</a></td>
</tr>
<tr class="field-even field"><th class="field-name">Purpose:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>Read USGS National Water Information System (NWIS) data files.</p>
<dl class="function">
<dt id="nwispy_filereader.get_date">
<tt class="descclassname">nwispy_filereader.</tt><tt class="descname">get_date</tt><big>(</big><em>daily</em>, <em>instantaneous</em><big>)</big><a class="headerlink" href="#nwispy_filereader.get_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the date strings from a data row.</p>
<dl class="docutils">
<dt><em>Parameters</em>:</dt>
<dd><p class="first">daily: string of daily format; i.e. 2013-06-25</p>
<p class="last">intantaneous: string of intantaneous format; i.e. 00:15 EDT</p>
</dd>
<dt><em>Return</em>:</dt>
<dd>date: datetime object</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nwispy_filereader.get_parameter_code">
<tt class="descclassname">nwispy_filereader.</tt><tt class="descname">get_parameter_code</tt><big>(</big><em>match</em><big>)</big><a class="headerlink" href="#nwispy_filereader.get_parameter_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Get code and description from existing parameters.</p>
<dl class="docutils">
<dt><em>Parameters</em>:</dt>
<dd>match: regular expression match object</dd>
<dt><em>Return</em>:</dt>
<dd>(code, description): tuple of code and description</dd>
<dt><em>Example</em>:</dt>
<dd><p class="first">string:  &#8216;#    06   00060     00003     Discharge, cubic feet per second (Mean)&#8217;</p>
<p>match.groups(0):  (&#8216;#&#8217;, &#8216;06&#8217;, &#8216;00060&#8217;, &#8216;00003&#8217;, &#8216;     Discharge, cubic feet per second (Mean)&#8217;)</p>
<p>match.group(1) = &#8216;#&#8217;</p>
<p>match.group(2) = &#8216;06&#8217;</p>
<p>match.group(3) = &#8216;00060&#8217;</p>
<p>match.group(4) = &#8216;00003&#8217;</p>
<p class="last">match.group(5) = &#8216;Discharge, cubic feet per second (Mean)&#8217;</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nwispy_filereader.main">
<tt class="descclassname">nwispy_filereader.</tt><tt class="descname">main</tt><big>(</big><big>)</big><a class="headerlink" href="#nwispy_filereader.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Test functionality of reading files</p>
</dd></dl>

<dl class="function">
<dt id="nwispy_filereader.read_file">
<tt class="descclassname">nwispy_filereader.</tt><tt class="descname">read_file</tt><big>(</big><em>filepath</em><big>)</big><a class="headerlink" href="#nwispy_filereader.read_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Open NWIS file, create a file object for read_file_in(filestream) to process.
This function is responsible to opening the file, removing the file opening  
responsibility from read_file_in(filestream) so that read_file_in(filestream)  
can be unit tested.</p>
<dl class="docutils">
<dt><em>Parameters:</em></dt>
<dd>filepath : string path to NWIS file</dd>
<dt><em>Return:</em></dt>
<dd>data : dictionary holding data found in NWIS data file</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nwispy_filereader.read_file_in">
<tt class="descclassname">nwispy_filereader.</tt><tt class="descname">read_file_in</tt><big>(</big><em>filestream</em><big>)</big><a class="headerlink" href="#nwispy_filereader.read_file_in" title="Permalink to this definition">¶</a></dt>
<dd><p>Read and process a USGS NWIS file. Finds any parameter and its respective data. 
Relevant data is put into a dictionary (see Return section).  Missing data values
are replaced with a NAN value.</p>
<dl class="docutils">
<dt><em>Parameters:</em></dt>
<dd>filestream: file object</dd>
<dt><em>Return:</em></dt>
<dd><p class="first">data: dictionary holding data found in NWIS data file</p>
<dl class="docutils">
<dt>data = {</dt>
<dd><p class="first">&#8216;date_retrieved&#8217;: None,</p>
<p>&#8216;gage_name&#8217;: None,</p>
<p>&#8216;column_names&#8217;: None,</p>
<p>&#8216;parameters&#8217;: [],</p>
<p>&#8216;dates&#8217;: [],</p>
<p class="last">&#8216;timestep&#8217;: None</p>
</dd>
</dl>
<p>}</p>
<p>** Note: The &#8216;parameters&#8217; key contains a list of dictionaries containing
the parameters found in the data file; i.e.</p>
<dl class="docutils">
<dt>parameters[0] = {</dt>
<dd><p class="first">&#8216;code&#8217;: string of NWIS code,</p>
<p>&#8216;description&#8217;: string of NWIS description,</p>
<p>&#8216;index&#8217;: integer of column index data is located,</p>
<p>&#8216;data&#8217;: numpy array of data values,</p>
<p>&#8216;mean&#8217;: mean of data values,</p>
<p>&#8216;max&#8217;: max of data values,</p>
<p class="last">&#8216;min&#8217;: min of data values</p>
</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nwispy_filereader.test_get_date">
<tt class="descclassname">nwispy_filereader.</tt><tt class="descname">test_get_date</tt><big>(</big><big>)</big><a class="headerlink" href="#nwispy_filereader.test_get_date" title="Permalink to this definition">¶</a></dt>
<dd><p>test the get date function</p>
</dd></dl>

<dl class="function">
<dt id="nwispy_filereader.test_get_parameter_code">
<tt class="descclassname">nwispy_filereader.</tt><tt class="descname">test_get_parameter_code</tt><big>(</big><big>)</big><a class="headerlink" href="#nwispy_filereader.test_get_parameter_code" title="Permalink to this definition">¶</a></dt>
<dd><p>test the get parameter code function</p>
</dd></dl>

</div>
<div class="section" id="module-nwispy_webservice">
<span id="nwispy-webservice"></span><h2>nwispy_webservice<a class="headerlink" href="#module-nwispy_webservice" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Module:</th><td class="field-body">nwispy_webservice.py</td>
</tr>
<tr class="field-even field"><th class="field-name">Author:</th><td class="field-body">Jeremiah Lant</td>
</tr>
<tr class="field-odd field"><th class="field-name">Email:</th><td class="field-body"><a class="reference external" href="mailto:jlant&#37;&#52;&#48;usgs&#46;gov">jlant<span>&#64;</span>usgs<span>&#46;</span>gov</a></td>
</tr>
<tr class="field-even field"><th class="field-name">Purpose:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>Retrieve nwis data files using USGS NWIS webservices</p>
<dl class="function">
<dt id="nwispy_webservice.download_file">
<tt class="descclassname">nwispy_webservice.</tt><tt class="descname">download_file</tt><big>(</big><em>user_parameters_url</em>, <em>data_type</em>, <em>filename</em>, <em>file_destination</em><big>)</big><a class="headerlink" href="#nwispy_webservice.download_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Get data from the web and save files to local machine.</p>
<dl class="docutils">
<dt>The base url for USGS NWIS Webservice is:</dt>
<dd>base_url = &#8220;<a class="reference external" href="http://waterservices.usgs.gov/nwis/">http://waterservices.usgs.gov/nwis/</a></dd>
<dt><em>Parameters:</em></dt>
<dd>user_parameters_url: encoded url based on users request</dd>
<dt><em>Return:</em></dt>
<dd>data_file:</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nwispy_webservice.encode_url">
<tt class="descclassname">nwispy_webservice.</tt><tt class="descname">encode_url</tt><big>(</big><em>data_request</em><big>)</big><a class="headerlink" href="#nwispy_webservice.encode_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Encode the url needed for the USGS NWIS webservice based on users requests.</p>
<dl class="docutils">
<dt><em>Parameters:</em></dt>
<dd>data_request: dictionary containing a data request</dd>
<dt><em>Return:</em></dt>
<dd>request_url: string encoded url</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nwispy_webservice.main">
<tt class="descclassname">nwispy_webservice.</tt><tt class="descname">main</tt><big>(</big><big>)</big><a class="headerlink" href="#nwispy_webservice.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Test nwispy_webservice</p>
</dd></dl>

<dl class="function">
<dt id="nwispy_webservice.read_webrequest">
<tt class="descclassname">nwispy_webservice.</tt><tt class="descname">read_webrequest</tt><big>(</big><em>filepath</em><big>)</big><a class="headerlink" href="#nwispy_webservice.read_webrequest" title="Permalink to this definition">¶</a></dt>
<dd><p>Open web request file, create a file object for read_webrequest_in(filestream) 
to process.     
<em>Parameters:</em></p>
<blockquote>
<div>filepath : string path to file</div></blockquote>
<dl class="docutils">
<dt><em>Return:</em></dt>
<dd>data : dictionary holding data found in file</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nwispy_webservice.read_webrequest_in">
<tt class="descclassname">nwispy_webservice.</tt><tt class="descname">read_webrequest_in</tt><big>(</big><em>filestream</em><big>)</big><a class="headerlink" href="#nwispy_webservice.read_webrequest_in" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a webrequest file and put data into a dictionary</p>
<dl class="docutils">
<dt><em>Parameters:</em></dt>
<dd>filestream: file object</dd>
<dt><em>Return:</em></dt>
<dd>data: dictionary holding data found in file</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nwispy_webservice.test_encode_url">
<tt class="descclassname">nwispy_webservice.</tt><tt class="descname">test_encode_url</tt><big>(</big><big>)</big><a class="headerlink" href="#nwispy_webservice.test_encode_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Test functionality of encode_url</p>
</dd></dl>

<dl class="function">
<dt id="nwispy_webservice.test_read_webrequest_in">
<tt class="descclassname">nwispy_webservice.</tt><tt class="descname">test_read_webrequest_in</tt><big>(</big><big>)</big><a class="headerlink" href="#nwispy_webservice.test_read_webrequest_in" title="Permalink to this definition">¶</a></dt>
<dd><p>Test functionality of read_webrequest_in</p>
</dd></dl>

</div>
<div class="section" id="module-nwispy_viewer">
<span id="nwispy-viewer"></span><h2>nwispy_viewer<a class="headerlink" href="#module-nwispy_viewer" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Module:</th><td class="field-body">nwis_viewer.py</td>
</tr>
<tr class="field-even field"><th class="field-name">Author:</th><td class="field-body">Jeremiah Lant</td>
</tr>
<tr class="field-odd field"><th class="field-name">Email:</th><td class="field-body"><a class="reference external" href="mailto:jlant&#37;&#52;&#48;usgs&#46;gov">jlant<span>&#64;</span>usgs<span>&#46;</span>gov</a></td>
</tr>
<tr class="field-even field"><th class="field-name">Purpose:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>Plot and print information about nwis data files.</p>
<dl class="function">
<dt id="nwispy_viewer.main">
<tt class="descclassname">nwispy_viewer.</tt><tt class="descname">main</tt><big>(</big><big>)</big><a class="headerlink" href="#nwispy_viewer.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Test functionality of plotting and printing file information</p>
</dd></dl>

<dl class="function">
<dt id="nwispy_viewer.plot_data">
<tt class="descclassname">nwispy_viewer.</tt><tt class="descname">plot_data</tt><big>(</big><em>nwis_data</em>, <em>is_visible=True</em>, <em>save_path=None</em><big>)</big><a class="headerlink" href="#nwispy_viewer.plot_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot each parameter contained in the nwis data. Save plots to a particular
path.</p>
<dl class="docutils">
<dt><em>Parameters</em>:</dt>
<dd><p class="first">nwis_data: dictionary holding data from NWIS file</p>
<p class="last">save_path: string path to save plot(s)</p>
</dd>
<dt><em>Return</em>:</dt>
<dd>no return</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nwispy_viewer.print_info">
<tt class="descclassname">nwispy_viewer.</tt><tt class="descname">print_info</tt><big>(</big><em>nwis_data</em><big>)</big><a class="headerlink" href="#nwispy_viewer.print_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Print relevant information and contained in the nwis data file.</p>
<dl class="docutils">
<dt><em>Parameters</em>:</dt>
<dd>nwis_data: dictionary holding data from NWIS file</dd>
<dt><em>Return</em>:</dt>
<dd>no return</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nwispy_logging">
<span id="nwispy-logging"></span><h2>nwispy_logging<a class="headerlink" href="#module-nwispy_logging" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Module:</th><td class="field-body">nwispy_logging.py</td>
</tr>
<tr class="field-even field"><th class="field-name">Author:</th><td class="field-body">Jeremiah Lant</td>
</tr>
<tr class="field-odd field"><th class="field-name">Email:</th><td class="field-body"><a class="reference external" href="mailto:jlant&#37;&#52;&#48;usgs&#46;gov">jlant<span>&#64;</span>usgs<span>&#46;</span>gov</a></td>
</tr>
<tr class="field-even field"><th class="field-name">Purpose:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>Log erroneous data values found in USGS NWIS files.</p>
<dl class="function">
<dt id="nwispy_logging.initialize_loggers">
<tt class="descclassname">nwispy_logging.</tt><tt class="descname">initialize_loggers</tt><big>(</big><em>output_dir</em>, <em>logging_type='warn'</em><big>)</big><a class="headerlink" href="#nwispy_logging.initialize_loggers" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the error logging objects.</p>
<dl class="docutils">
<dt><em>Parameters:</em></dt>
<dd>output_dir : string directory path</dd>
<dt><em>Return:</em></dt>
<dd>loggin_type : string flag to specify a particular kind of log file</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nwispy_logging.remove_loggers">
<tt class="descclassname">nwispy_logging.</tt><tt class="descname">remove_loggers</tt><big>(</big><big>)</big><a class="headerlink" href="#nwispy_logging.remove_loggers" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all the error logging objects that exist in the application.</p>
<dl class="docutils">
<dt><em>Parameters:</em></dt>
<dd>no parameters</dd>
<dt><em>Return:</em></dt>
<dd>no return</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="nwispy-helpers">
<h2>nwispy_helpers<a class="headerlink" href="#nwispy-helpers" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="images.html" title="Gallery"
             >next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="Overview"
             >previous</a> |</li>
        <li><a href="index.html">home</a>|&nbsp;</li>
        <li><a href="search.html">search</a>|&nbsp;</li>
 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Jeremiah Lant.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>